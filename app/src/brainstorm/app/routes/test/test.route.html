<section fxLayout="column"
         fxLayoutAlign="start stretch"
         [style.height.%]="100">
    <p class="mat-title m8">Test Rig API</p>
    <mat-progress-bar *ngIf="loading"
                      color="primary"
                      mode="indeterminate"></mat-progress-bar>
    <section *ngIf="socket"
             fxLayout="column"
             fxLayoutAlign="start stretch"
             fxFlex>
        <section *ngIf="state"
                 fxLayout="row | wrap"
                 fxLayoutAlign="start start"
                 fxLayoutGap="8px"
                 fxFlex>
            <section fxLayout="column"
                     fxLayoutAlign="start start"
                     class="p8">
                <card>
                    <p class="m4 mat-body-strong">Connection String</p>
                    <p class="m4 word-break-all">
                        {{state.connection ?? 'No Connection Retrieved'}}
                    </p>
                </card>
                <toggle-block activeLabel="Destroy Database"
                              inactiveLabel="Initialize Database"
                              [active]="state.databaseCreated"
                              [disabled]="loading"
                              (slide)="toggleDatabase()"></toggle-block>
                <toggle-block activeLabel="Kill Process"
                              inactiveLabel="Start Process"
                              [active]="state.processRunning"
                              [disabled]="loading"
                              (slide)="toggleProcess()"></toggle-block>
                <status-button label="Seed Topic"
                               [disabled]="loading || topic?.id > 0 || !(state.databaseCreated) || !(state.processRunning)"
                               [status]="topic?.id > 0"
                               (action)="seedTopic()"></status-button>
            </section>
            <pre class="p8 m8"><code class="color-green">{{topic | json}}</code></pre>
        </section>
        <console [messages]="socket.output"></console>
    </section>
